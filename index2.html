<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tabela Dinâmica</title>

    <style>
        * {
            padding: 0;
            margin: 0;
            box-sizing: content-box;
        }

        table {
            border-collapse: collapse;
            width: 100%;
        }
        th, td {
            padding: 10px;
            border: 1px solid #ccc;
        }
        input, label {
            width: 100%;
            display: block;
        }

        .TableColRight { display: flex; align-items: center; justify-content: flex-end; }
        .TableColLeft { display: flex; align-items: center; justify-content: flex-start; }
        .TableColCenter { display: flex; align-items: center; justify-content: center; }
        
        .ReactVirtualized__Table__headerRow,
        .ReactVirtualized__Table__row  {
            display: flex;
        }

        .ReactVirtualized__Table__headerColumn {
            line-height: 40px;
            box-shadow: inset 0px 0px rgb(0, 0, 0, .15), inset -1px 0px rgb(0, 0, 0, .15), 0 1px rgb(0, 0, 0, .15);
        }

        .TableHeaderContent {
            padding-left: 10px;
            padding-right: 10px;
        }

        .ReactVirtualized__Table__headerRow {
            background-color: #ededf3;
            box-shadow: rgb(201, 205, 214) 0px 1px inset, rgb(201, 205, 214) -1px -1px inset;
        }

        .TableColAlt {
            background-color: #e9ecf1;
        }

        .TableHeaderName {
            font-weight: 700;
            font-size: 12px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
        }

        .TableCol {
            box-shadow: inset 0px 0px rgb(0, 0, 0, .15), inset -1px 0px rgb(0, 0, 0, .15), 0 1px rgb(0, 0, 0, .15);
            line-height: 30px;
            /* padding-left: 10px;
            padding-right: 10px; */
        }

        /* Estilo para o contêiner da tabela com scroll */
        .TableContainer {
            width: 100%;
            height: 500px;
            overflow-x: auto;  /* Scroll horizontal */
            overflow-y: auto;  /* Scroll vertical */
        }

        .PainelHeader {
            height: 40px;
            width: 100%;
            border-radius: 3px 3px 0 0;
            background: rgb(185 195 213);
            display: flex;
            justify-content: space-between;
            align-items: center;
            
            cursor: pointer;
        }

        .PainelHeaderSearch {
            margin-right: 10px;
        }

        .PainelHeaderConfigs {
            margin-left: 10px;
        }

        .PainelHeaderSearchInput {
            border-radius: .15rem;
            border: solid 1px #9e9e9e;
            padding-left: 5px;
            padding-right: 5px;
            width: 205px;
            font-size: .75rem;
            padding: 5px;
        }
        
        .PainelHeaderSearchInput:hover
        {
            border: solid 1px #1E90FF;
        }
        
        .PainelHeaderSearchInput:focus
        {
            z-index: 2;
            border: solid 1px #1E90FF;
            box-shadow: 0 0 0 .15rem #007dfa3a;
            outline: none;
        }

        .TableHeader {
            cursor: grab;
            padding: 0px 10px;
        }

        .header-content {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin: 0 8px;
            pointer-events: none; /* Previne interferência com drag/resize */
        }

        .TableHeader:active {
            cursor: grabbing;
        }

        .resize-handle {
            position: absolute;
            right: 0;
            top: 0;
            width: 8px;
            height: 100%;
            cursor: col-resize;
            display: flex;
            align-items: center;
            justify-content: center;
            /* opacity: 0; */
            transition: opacity 0.2s;
        }

        .TableHeader .drag-handle {
            display: flex;
            justify-content: space-between;
            width: 90%;
        }

        .TableHeader.dragging {
            cursor: grabbing;
            opacity: 0.7;
        }

        .TableHeader.drag-over {
            position: relative;
        }

        .TableHeader.drag-over::before {
            content: "";
            position: absolute;
            left: -2px;
            top: 0;
            height: 100%;
            width: 4px;
            background-color: #1E90FF;
            border-radius: 2px;
        }

        .TableContainer {
            width: 100%;
            height: 500px;
            overflow-x: auto;
            overflow-y: auto;
            position: relative;
        }

        .ReactVirtualized__Table {
            position: relative;
            z-index: 1;
        }

        .ReactVirtualized__Table__headerRow {
            position: sticky !important;
            top: 0;
            z-index: 2;
            background-color: #ededf3;
        }

        /* Garante que o scroll não sobreponha as células */
        .ReactVirtualized__Table__Grid {
            outline: none;
        }

        /* Previne coluna extra */
        .ReactVirtualized__Table__rowColumn:empty {
            display: none !important;
        }
    </style>
</head>
<body>
    <div id="sd-tabela"></div>
    
    <script src="./react.development.js"></script>
    <script src="./react-dom.development.js"></script>
    <script src="./react-virtualized.js"></script>
    <script src="./sd-tabela.js"></script>
    <script>
        let tables = []

        window.addEventListener('load', function() {

            tables['item'] = renderTable({
                id: "tabela", 
                structure: [
                    { width: 200, type: 'label', align: 'left', visible: 'S', mask: '', ref: 'h02Produto', back: 'Produto', name: 'Produto' },
                    { width: 200,  type: 'label', align: 'left', visible: 'S', mask: '', ref: 'h02Descricao', back: 'Descricao', name: 'Descrição', 'sticky-Width': '400px', title: true },
                    { width: 200, type: 'label', align: 'center', visible: 'S', mask: '', ref: 'h02Unidade', back: 'Un', name: 'Un' },
                    { width: 200, type: 'label', align: 'right', visible: 'S', mask: '', ref: 'h02Saldo1', back: 'Saldo', name: 'Saldo', cobol: "BTN-CARREGAR-ESTOQUE", loading: true, onlyNumbers: true, size: '15', max: '18', class_icon: 'cAtualizaEstoque', title_icon: "Carregar Saldo", textalign: "right", readonly: "S", classid: "h02Saldo" },
                    { width: 200, type: 'label', align: 'right', visible: 'S', mask: '', ref: 'h02Saldo2', back: 'Saldo', name: 'Saldo 1', cobol: "BTN-CARREGAR-ESTOQUE", loading: true, onlyNumbers: true, size: '15', max: '18', class_icon: 'cAtualizaEstoque', title_icon: "Carregar Saldo", textalign: "right", readonly: "S", classid: "h02Saldo" },
                    { width: 200, type: 'label', align: 'right', visible: 'S', mask: '', ref: 'h02Saldo3', back: 'Saldo', name: 'Saldo 2', cobol: "BTN-CARREGAR-ESTOQUE", loading: true, onlyNumbers: true, size: '15', max: '18', class_icon: 'cAtualizaEstoque', title_icon: "Carregar Saldo", textalign: "right", readonly: "S", classid: "h02Saldo" },
                    { width: 200, type: 'label', align: 'right', visible: 'N', mask: '', ref: 'h02Saldo4', back: 'Saldo', name: 'Saldo 3', cobol: "BTN-CARREGAR-ESTOQUE", loading: true, onlyNumbers: true, size: '15', max: '18', class_icon: 'cAtualizaEstoque', title_icon: "Carregar Saldo", textalign: "right", readonly: "S", classid: "h02Saldo" },
                ],
                dados: Array.from({ length: 10000 }, (_, i) => ({
                    h02Produto: i * 1,
                    h02Descricao: i * 2,
                    h02Unidade: i * 3,
                    h02Saldo1: i * 4,
                    h02Saldo2: i * 5,
                    h02Saldo3: i * 6,
                    h02Saldo4: i * 7
                })),
            })
        })
    </script>
</body>
</html>
