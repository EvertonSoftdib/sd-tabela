<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>React Virtualized com JS Puro</title>
    <script src="./react.development.js"></script>
    <script src="./react-dom.development.js"></script>
    <script src="./react-virtualized.js"></script>
</head>
<body>
    <div id="root"></div>

    <div id="root"></div>

    <script>
        const { createRoot } = ReactDOM;
        const { Table, Column } = ReactVirtualized;

        function TabelaVirtualizada() {
            // ðŸ”¹ SimulaÃ§Ã£o de dados (1000 registros)
            const dados = Array.from({ length: 10000 }, (_, i) => ({
                id: i + 1,
                nome: `UsuÃ¡rio ${i + 1}`,
                email: `usuario${i + 1}@email.com`
            }));

            function atualizarCampo(index, campo, valor) {
                const novosDados = [...dados];
                novosDados[index][campo] = valor;
                setDados(novosDados);
            }

            function renderizarInput({ cellData, rowIndex, dataKey }) {
                return React.createElement("input", {
                    type: "text",
                    value: cellData,
                    onChange: (e) => atualizarCampo(rowIndex, dataKey, e.target.value)
                });
            }

            // ðŸ”¹ Renderizador da tabela
            return React.createElement(Table, {
                width: 600,   // Largura da tabela
                height: 400,  // Altura da tabela
                headerHeight: 50,
                rowHeight: 40,
                rowCount: dados.length,
                rowGetter: ({ index }) => dados[index],
                children: [
                    React.createElement(Column, {
                        key: "id",
                        label: "ID",
                        dataKey: "id",
                        width: 100
                    }),
                    React.createElement(Column, {
                        key: "nome",
                        label: "Nome",
                        dataKey: "nome",
                        width: 250,
                        cellRenderer: renderizarInput 
                    }),
                    React.createElement(Column, {
                        key: "email",
                        label: "E-mail",
                        dataKey: "email",
                        width: 250,
                        cellRenderer: renderizarInput 
                    })
                ]
            });
        }

        let structure = [
            { type: 'label', "sticky-Width": "300px", align: 'left', visible: 'S', mask: '', ref: 'h02Produto', back: 'Produto', name: 'Produto' },
            { type: 'label', align: 'left', visible: 'S', mask: '', ref: 'h02Descricao', back: 'Descricao', name: 'Descri&ccedil;&atilde;o', 'sticky-Width': '400px', title: true },
            { type: 'label', align: 'center', visible: 'S', mask: '', ref: 'h02Unidade', back: 'Un', name: 'Un' },
            { type: customSaldo, align: 'right', visible: 'S', mask: '', ref: 'h02Saldo', back: 'Saldo', name: 'Saldo', cobol: "BTN-CARREGAR-ESTOQUE", loading: true, onlyNumbers: true, size: '15', max: '18', class_icon: 'cAtualizaEstoque', title_icon: "Carregar Saldo", textalign: "right", readonly: "S", classid: "h02Saldo" },
            { type: 'number', align: 'right', visible: 'S', mask: '', ref: 'h02QtdePecas', back: 'Pecas', name: 'Pe&ccedil;as', size: '8', max: '6', textalign: "right", readonly: "S", classid: "h02QtdePecas" },
            { type: 'label', align: 'left', visible: 'S', mask: '', ref: 'h02Ipi', back: 'IPI', name: 'IPI' },
            { type: 'label', align: 'left', visible: 'S', mask: '', ref: 'h02FlagIcmsSt', back: 'ICMS', name: 'ICMS' },
            { type: 'label', align: 'right', visible: 'S', mask: '', ref: 'h02PrecoTabela', back: 'Pre&ccedil;o Tabela', name: 'Pre&ccedil;o Tabela' },
            { type: 'label', align: 'right', visible: 'S', mask: '', ref: 'h02PrecoPromoc', back: 'Pre&ccedil;o Promocional', name: 'Pre&ccedil;o Promocional' },
            { type: 'label', align: 'left', visible: 'S', mask: '####.##.##', ref: 'h02Ncm', back: 'Ncm', name: 'Ncm' },
            { type: 'label', align: 'left', visible: 'S', mask: '', ref: 'h02Linha', back: 'Linha', name: 'Linha' },
            { type: 'label', align: 'left', visible: 'S', mask: '', ref: 'h02Grupo', back: 'Grupo', name: 'Grupo' },
            { type: 'label', align: 'left', visible: 'S', mask: '', ref: 'h02Subgrupo', back: 'Subgrupo', name: 'Subgrupo' },
            { type: 'label', align: 'right', visible: 'S', mask: '', ref: 'h02EstVirtual', back: 'Est.Virtual', name: 'Est.Virtual', size: '15', max: '13', textalign: "right", readonly: "S", classid: "h02EstVirtual" },
            { type: 'label', align: 'left', visible: 'S', mask: '', ref: 'h02Aplicacao', back: 'Aplica&ccedil;&atilde;o', name: 'Aplica&ccedil;&atilde;o' },
            { type: 'label', align: 'left', visible: 'S', mask: '', ref: 'h02NroOriginal', back: 'Nro Original', name: 'Nro Original' },
            { type: 'label', align: 'left', visible: 'S', mask: '', ref: 'h02CodDistribuidor', back: 'C&oacute;digo Distribuidor', name: 'C&oacute;digo Distribuidor' },
            { type: 'label', align: 'left', visible: 'S', mask: '', ref: 'h02Marca', back: 'Marca', name: 'Marca' },
            { type: 'label', align: 'left', visible: 'S', mask: '', ref: 'h02CodigoBarras', back: 'C&oacute;digo de Barras', name: 'C&oacute;digo de Barras' },
            { type: 'label', align: 'left', visible: 'S', mask: '', ref: 'h02TpArmaz', back: 'Tp Armazenamento', name: 'Tp Armazenamento' },
            { type: 'label', align: 'left', visible: 'S', mask: '', ref: 'h02DescFornecedor', back: 'Descri&ccedil;&atilde;o Fornecedor', name: 'Descri&ccedil;&atilde;o Fornecedor' },
            { type: 'label', align: 'right', visible: 'S', mask: '', ref: 'h02PesoEspecifico', back: 'PesoEspecifico', name: 'Peso Esp.' },
            { type: 'label', align: 'left', visible: 'S', mask: '', ref: 'h02DescSubgrupo', back: 'DescSubgrupo', name: 'DescSubgrupo' },
            { type: 'label', align: 'right', visible: 'S', mask: 'inteiro', ref: 'h02LinhaWeb', back: 'Indice', name: '&Iacute;ndice' },
            { type: 'label', align: 'right', visible: 'N', mask: '', ref: 'h02QtdePedido', back: 'QtdePedido', name: 'QtdePedido' },
            { type: 'label', align: 'right', visible: 'N', mask: '', ref: 'h02PercAdPedido', back: 'PercAdPedido', name: 'PercAdPedido' },
            { type: 'label', align: 'left', visible: 'S', mask: '', ref: 'h02DescCompl', back: 'DescCompl', name: 'Complemento Desc', 'max-width': '150px', classes: "wrap" },
            { type: 'label', align: 'left', visible: 'S', mask: '', ref: 'h02ColunaCompl', back: 'ColunaCompl', name: 'Complemento', 'max-width': '150px', classes: "wrap", title: true },
            { type: 'label', align: 'left', visible: 'S', mask: '', ref: 'h02Catalisador', back: 'Catalisador', name: 'Catalisador', 'max-width': '150px', classes: "wrap", title: true },
            { type: 'label', align: 'left', visible: 'S', mask: '', ref: 'h02Proporcao', back: 'Proporcao', name: 'Proporcao', 'max-width': '150px', classes: "wrap", title: true },
            { type: 'label', align: 'left', visible: 'S', mask: '', ref: 'h02Diluente', back: 'Diluente', name: 'Diluente', 'max-width': '150px', classes: "wrap", title: true },
            { type: 'label', align: 'left', visible: 'S', mask: '', ref: 'h02Catalisador2', back: 'Catalisador', name: 'Catalisador 2', 'max-width': '150px', classes: "wrap", title: true },
            { type: 'label', align: 'left', visible: 'S', mask: '', ref: 'h02Diluente2', back: 'Diluente', name: 'Diluente 2', 'max-width': '150px', classes: "wrap", title: true },
            { type: 'input', align: 'right', visible: 'S', mask: '', ref: 'h02PrecoUnitario', back: 'PrecoUnitario', name: 'Pre&ccedil;o Negociado', cobol: 'GRAVAR-PRECO-UNITARIO-MI', loading: true, attrs: { tabindex: -1 } },
            { type: 'input', align: 'right', visible: 'S', mask: '', ref: 'h02Qtde', back: 'Qtde', name: 'Quantidade', cobol: 'GRAVAR-QTDE-MI', loading: true },
            { type: 'input', align: 'right', visible: 'S', mask: '', ref: 'h02PercAd', back: 'PercAd', name: 'Desconto', cobol: 'GRAVAR-PERC-AD-MI', loading: true },
            { type: 'label', align: 'left', visible: 'S', mask: '', ref: 'h02DescLinha', back: 'DescLinha', name: 'DescLinha' },
            { type: 'label', align: 'left', visible: 'S', mask: '', ref: 'h02DescGrupo', back: 'DescGrupo', name: 'DescGrupo' },
            { type: 'label', align: 'right', visible: 'N', mask: '', ref: 'h02FlagsBloqueio', back: 'FlagsBloqueio', name: '' },
            { type: 'label', align: 'left', visible: 'S', mask: '', ref: 'h02Localizacao', back: 'Localizacao', name: 'Localizacao' },
            { type: 'label', align: 'left', visible: 'S', mask: '', ref: 'h02Cas', back: 'Cas', name: 'CAS Nï¿½' },
            { type: 'label', align: 'left', visible: 'S', mask: '', ref: 'h02ColorIndex', back: 'ColorIndex', name: 'Color Index' },
        ]

        // Renderizando a Tabela no DOM
        const rootElement = document.getElementById("root");
        const root = createRoot(rootElement);
        root.render(React.createElement(TabelaVirtualizada));
    </script>
</body>
</html>
